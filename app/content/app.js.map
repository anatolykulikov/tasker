{"version":3,"sources":["functions.js","index.js","init.js","ui.js"],"names":["createTaskСheck","id","taskName","document","getElementById","value","taskDesc","length","addTask","removeEventListener","remove","name","desc","task","app","task_coint","decr","data","getData","plan","push","drawTasks","updateApp","deleteTask","arr","element","from","splice","moveTask","to","console","info","concat","run","Date","initApp","localStorage","getItem","loadApp","notify","installApp","draw_Main","draw_Taskboard","version","work","done","archive","setItem","JSON","stringify","parse","deleteApp","removeItem","innerHTML","addEventListener","createTask","field","render","i","id_delete","id_run","_loop","id_done","id_plan","_loop2","id_archive","_loop3","addTaskId","Math","trunc","random","dialog","createElement","className","body","appendChild","closeTask","head","message","type","setTimeout","classList","add","window","onload"],"mappings":"aACA,SAAAA,gBAAAC,GACA,IAAAC,EAAAC,SAAAC,eAAA,UAAAH,EAAA,SAAAI,MACAC,EAAAH,SAAAC,eAAA,UAAAH,EAAA,SAAAI,MAEA,EAAAH,EAAAK,QAAA,EAAAD,EAAAC,SACAC,QAAAN,EAAAI,GACAH,SAAAC,eAAAH,GAAAQ,oBAAA,QAAA,WACAT,gBAAAC,KAEAE,SAAAC,eAAA,UAAAH,GAAAS,UAKA,SAAAF,QAAAG,EAAAC,GACA,IAAAC,EAAA,CACAZ,KAAAa,IAAAC,WACAJ,KAAAA,EACAK,KAAAJ,EACAK,KAAAC,WAEAJ,IAAAK,KAAAC,KAAAP,GACAQ,UAAA,QACAC,YAIA,SAAAC,WAAAC,EAAAC,EAAAC,GACAF,EAAAG,OAAAF,EAAA,GACAJ,UAAAK,GACAJ,YAIA,SAAAM,SAAAJ,EAAAE,EAAAG,EAAAJ,GACAK,QAAAC,KAAA,wBAAAC,OAAAP,EAAA,QAAAO,OAAAN,EAAA,OAAAM,OAAAH,IACA,IAAAI,EAAAT,EAAAC,GACAX,IAAAe,GAAAT,KAAAa,GACAT,EAAAG,OAAAF,EAAA,GACAJ,UAAAK,GACAL,UAAAQ,GACAP,YAIA,SAAAJ,UAEA,OADA,IAAAgB,KC/CA,IAAApB,ICAA,SAAAqB,UAEAC,aAAAC,QAAA,cACAvB,IAAAwB,UACAC,OAAA,SAAA,uBAAA,aAEAzB,IAAA0B,aACAD,OAAA,cAAA,mDAAA,YAEAE,YACAC,iBAGA,SAAAF,aACA,IAAA1B,EAAA,CACA6B,QAAA,EACA5B,WAAA,EACAI,KAAA,GACAyB,KAAA,GACAC,KAAA,GACAC,QAAA,IAIA,OAFAV,aAAAW,QAAA,YAAAC,KAAAC,UAAAnC,IACAyB,OAAA,UAAA,mDAAA,WACAzB,EAEA,SAAAwB,UAEA,OADAxB,IAAAkC,KAAAE,MAAAd,aAAAC,QAAA,cAGA,SAAAf,YACAc,aAAAW,QAAA,YAAAC,KAAAC,UAAAnC,MAEA,SAAAqC,YACAf,aAAAgB,WAAA,aACAb,OAAA,qBAAA,sDAAA,SACAE,YACAC,iBCpCA,SAAAD,YAEAtC,SAAAC,eAAA,QAAAiD,UADA,oYAEAlD,SAAAC,eAAA,WAAAkD,iBAAA,QAAAC,YAIA,SAAAb,iBAEAvC,SAAAC,eAAA,WAAAiD,UADA,2TAEAhC,UAAA,QACAA,UAAA,QACAA,UAAA,QAIA,SAAAA,UAAAmC,GACA,IAAAvC,EAAAH,IAAA0C,GACAC,EAAA,GAEA,OAAAD,GAEA,IAAA,OACA,IAAA,IAAAE,EAAA,EAAAA,EAAAzC,EAAAV,OAAAmD,IAAA,CACA,IAAAC,EAAA,WAAA3B,OAAAf,EAAAyC,GAAAzD,IACA2D,EAAA,WAAA5B,OAAAf,EAAAyC,GAAAzD,IAEAwD,GADA,yBAAAzB,OAAAf,EAAAyC,GAAA/C,KAAA,YAAAqB,OAAAf,EAAAyC,GAAA1C,KAAA,qEAAAgB,OAAA4B,EAAA,sDAAA5B,OAAA2B,EAAA,gCAGAxD,SAAAC,eAAAoD,GAAAH,UAAAI,EACA,IARA,IAAAI,EAAA,SAQAH,GACA,IAAAC,EAAA,WAAA3B,OAAAf,EAAAyC,GAAAzD,IACA2D,EAAA,WAAA5B,OAAAf,EAAAyC,GAAAzD,IACAE,SAAAC,eAAAuD,GAAAL,iBAAA,QAAA,WACA/B,WAAAN,EAAA,CAAAyC,GAAAF,KAEArD,SAAAC,eAAAwD,GAAAN,iBAAA,QAAA,WACA1B,SAAAX,EAAA,OAAA,OAAA,CAAAyC,OAPAA,EAAA,EAAAA,EAAAzC,EAAAV,OAAAmD,IAAAG,EAAAH,GAUA,MAEA,IAAA,OACA,IAAA,IAAAA,EAAA,EAAAA,EAAAzC,EAAAV,OAAAmD,IAAA,CACA,IAAAC,EAAA,WAAA3B,OAAAf,EAAAyC,GAAAzD,IACA6D,EAAA,YAAA9B,OAAAf,EAAAyC,GAAAzD,IACA8D,EAAA,cAAA/B,OAAAf,EAAAyC,GAAAzD,IAEAwD,GADA,yBAAAzB,OAAAf,EAAAyC,GAAA/C,KAAA,YAAAqB,OAAAf,EAAAyC,GAAA1C,KAAA,qEAAAgB,OAAA8B,EAAA,sDAAA9B,OAAA+B,EAAA,oDAAA/B,OAAA2B,EAAA,gCAGAxD,SAAAC,eAAAoD,GAAAH,UAAAI,EACA,IATA,IAAAO,EAAA,SASAN,GACA,IAAAC,EAAA,WAAA3B,OAAAf,EAAAyC,GAAAzD,IACA6D,EAAA,YAAA9B,OAAAf,EAAAyC,GAAAzD,IACA8D,EAAA,cAAA/B,OAAAf,EAAAyC,GAAAzD,IACAE,SAAAC,eAAAuD,GAAAL,iBAAA,QAAA,WACA/B,WAAAN,EAAA,CAAAyC,GAAAF,KAEArD,SAAAC,eAAA0D,GAAAR,iBAAA,QAAA,WACA1B,SAAAX,EAAA,OAAA,OAAA,CAAAyC,MAEAvD,SAAAC,eAAA2D,GAAAT,iBAAA,QAAA,WACA1B,SAAAX,EAAA,OAAA,OAAA,CAAAyC,OAXAA,EAAA,EAAAA,EAAAzC,EAAAV,OAAAmD,IAAAM,EAAAN,GAcA,MAEA,IAAA,OACA,IAAA,IAAAA,EAAA,EAAAA,EAAAzC,EAAAV,OAAAmD,IAAA,CACA,IAAAC,EAAA,WAAA3B,OAAAf,EAAAyC,GAAAzD,IACA2D,EAAA,WAAA5B,OAAAf,EAAAyC,GAAAzD,IACAgE,EAAA,YAAAjC,OAAAf,EAAAyC,GAAAzD,IAEAwD,GADA,yBAAAzB,OAAAf,EAAAyC,GAAA/C,KAAA,YAAAqB,OAAAf,EAAAyC,GAAA1C,KAAA,sEAAAgB,OAAAiC,EAAA,mDAAAjC,OAAA4B,EAAA,sDAAA5B,OAAA2B,EAAA,gCAGAxD,SAAAC,eAAAoD,GAAAH,UAAAI,EACAtD,SAAAC,eAAAoD,GAAAH,UAAAI,EACA,IAVA,IAAAS,EAAA,SAUAR,GACA,IAAAC,EAAA,WAAA3B,OAAAf,EAAAyC,GAAAzD,IACA2D,EAAA,WAAA5B,OAAAf,EAAAyC,GAAAzD,IACAgE,EAAA,YAAAjC,OAAAf,EAAAyC,GAAAzD,IACAE,SAAAC,eAAAuD,GAAAL,iBAAA,QAAA,WACA/B,WAAAN,EAAA,CAAAyC,GAAAF,KAEArD,SAAAC,eAAAwD,GAAAN,iBAAA,QAAA,WACA1B,SAAAX,EAAA,OAAA,OAAA,CAAAyC,MAEAvD,SAAAC,eAAA6D,GAAAX,iBAAA,QAAA,WACA1B,SAAAX,EAAA,OAAA,UAAA,CAAAyC,OAXAA,EAAA,EAAAA,EAAAzC,EAAAV,OAAAmD,IAAAQ,EAAAR,IAoBA,SAAAH,aACA,IAAAY,EAAAC,KAAAC,MAAA,GAAAD,KAAAE,UACAC,EAAApE,SAAAqE,cAAA,OACAD,EAAAE,UAAA,SACAF,EAAAtE,GAAA,UAAAkE,EACAI,EAAAlB,UAAA,wFAAAc,EAAA,6DAAAA,EAAA,kFAAAA,EAAA,sDAAAA,EAAA,2BAEAhE,SAAAuE,KAAAC,YAAAJ,GACApE,SAAAC,eAAA+D,GAAAb,iBAAA,QAAA,WACAtD,gBAAAmE,KAEAhE,SAAAC,eAAA,SAAA+D,GAAAb,iBAAA,QAAA,WACAsB,UAAAT,KAKA,SAAAS,UAAA3E,GACAE,SAAAC,eAAAH,GAAAQ,oBAAA,QAAA,WACAT,gBAAAC,KAEAE,SAAAC,eAAA,SAAAH,GAAAQ,oBAAA,QAAA,WACAmE,UAAA3E,KAEAE,SAAAC,eAAA,UAAAH,GAAAS,SAIA,SAAA6B,OAAAsC,EAAAC,EAAAC,GACA,IAAAxC,EAAApC,SAAAqE,cAAA,OACAjC,EAAAtC,GAAAmE,KAAAC,MAAA,GAAAD,KAAAE,UACA/B,EAAAkC,UAAA,iBAAAzC,OAAA+C,EAAA,kBACAxC,EAAAc,UAAA,OAAArB,OAAA6C,EAAA,YAAA7C,OAAA8C,EAAA,QACA3E,SAAAuE,KAAAC,YAAApC,GACAyC,WAAA,WACAzC,EAAA0C,UAAAvE,OAAA,iBACAsE,WAAA,WACAzC,EAAA0C,UAAAC,IAAA,gBACAF,WAAA,WACAzC,EAAA7B,UACA,OACA,MACA,KF1IAyE,OAAAC,OAAA,WACAjD","file":"app.js","sourcesContent":["// Проверка заполнения задания\r\nfunction createTaskСheck(id) {\r\n    let taskName = document.getElementById('dialog-' + id + '-name').value;\r\n    let taskDesc = document.getElementById('dialog-' + id + '-decr').value;\r\n\r\n    if(taskName.length > 0 && taskDesc .length > 0) {\r\n        addTask(taskName, taskDesc);\r\n        document.getElementById(id).removeEventListener('click', function() {\r\n            createTaskСheck(id);\r\n        });\r\n        document.getElementById('dialog-' + id).remove();\r\n    }\r\n}\r\n\r\n// Добавление задачи\r\nfunction addTask(name, desc) {\r\n    let task = {\r\n        id: ++app.task_coint,\r\n        name: name,\r\n        decr: desc,\r\n        data: getData()\r\n    }\r\n    app.plan.push(task);\r\n    drawTasks('plan');\r\n    updateApp();\r\n}\r\n\r\n// Удаление задачи\r\nfunction deleteTask(arr, element, from) {\r\n    arr.splice(element, 1);\r\n    drawTasks(from);\r\n    updateApp();\r\n}\r\n\r\n// Перемещение задачи\r\nfunction moveTask(arr, from, to, element) {\r\n    console.info(`Переместить задачу id${element} из ${from} в ${to}`);\r\n    let run = arr[element];\r\n    app[to].push(run);\r\n    arr.splice(element, 1);\r\n    drawTasks(from);\r\n    drawTasks(to);\r\n    updateApp();\r\n}\r\n\r\n// Функция текущей даты\r\nfunction getData() {\r\n    let data = new Date();\r\n    return data;\r\n};","var app;\r\n// Инициализация приложения\r\nwindow.onload = () => {\r\n    initApp();\r\n};","function initApp() {\r\n    // Приложение установлено\r\n    if(localStorage.getItem('TaskerApp')) {\r\n        app = loadApp();\r\n        notify('Готово', 'Все данные загружены', 'success');\r\n    } else {\r\n        app = installApp();\r\n        notify('Установлено', 'Приложение успешно установлено и готово к работе', 'success');\r\n    }\r\n    draw_Main();\r\n    draw_Taskboard();\r\n}\r\n\r\nfunction installApp() {\r\n    let app = {\r\n        version: 1,\r\n        task_coint: 0,\r\n        plan: [],\r\n        work: [],\r\n        done: [],\r\n        archive: []\r\n    };\r\n    localStorage.setItem('TaskerApp', JSON.stringify(app));\r\n    notify('Готово!','Приложение успешно установлено и готово к работе', 'success');\r\n    return app;\r\n}\r\nfunction loadApp() {\r\n    app = JSON.parse(localStorage.getItem('TaskerApp'));\r\n    return app;\r\n}\r\nfunction updateApp() {\r\n    localStorage.setItem('TaskerApp', JSON.stringify(app));\r\n}\r\nfunction deleteApp() {\r\n    localStorage.removeItem('TaskerApp');\r\n    notify('Приложение удалено','Приложение полностью удалено, все данные уничтожены', 'error');\r\n    draw_Main();\r\n    draw_Taskboard();\r\n}","// Отрисовка приложения\r\nfunction draw_Main() {\r\n    let html = '<aside class=\"app__sidebar\"><h1>Tasker<span>.app</span></h1><nav class=\"app__menu\"><span class=\"app__menu_addtask\" id=\"addtask\">Добавить</span><span class=\"app__menu_element app__menu-selected\">Задачи</span><span class=\"app__menu_element\">Архив</span><hr class=\"app__menu_divider\"><span class=\"app__menu_element\">Настройки</span></nav></aside><div id=\"appbody\" class=\"app__body\"></div>';\r\n    document.getElementById('main').innerHTML = html;\r\n    document.getElementById('addtask').addEventListener('click', createTask);\r\n}\r\n\r\n// Отрисовка доски задач\r\nfunction draw_Taskboard() {\r\n    let html = '<section class=\"app__task_col\"><h2>План</h2><div class=\"app__task_wrapper\" id=\"plan\"></div></section><section class=\"app__task_col\"><h2>В работе</h2><div class=\"app__task_wrapper\" id=\"work\"></div></section><section class=\"app__task_col\"><h2>Выполнены</h2><div class=\"app__task_wrapper\" id=\"done\"></div></section>';\r\n    document.getElementById('appbody').innerHTML = html;\r\n    drawTasks('plan');\r\n    drawTasks('work');\r\n    drawTasks('done');\r\n}\r\n\r\n// Отрисовка задачи\r\nfunction drawTasks(field) {\r\n    let data = app[field];\r\n    let render = '';\r\n\r\n    switch(field) {\r\n        // Отрисовываем элементы в плане\r\n        case 'plan': {\r\n            for (let i = 0; i < data.length; i++) {\r\n                let id_delete = `deltask-${data[i].id}`;\r\n                let id_run = `runtask-${data[i].id}`;\r\n                let html = `<div class=\"task\"><h3>${data[i].name}</h3><p>${data[i].decr}</p><div class=\"task__controls\"><span class=\"control-active\" id=\"${id_run}\">В работу</span><span class=\"control-delete\" id=\"${id_delete}\">Удалить</span></div></div>`;\r\n                render = render + html;\r\n            }\r\n            document.getElementById(field).innerHTML = render;\r\n            for (let i = 0; i < data.length; i++) {\r\n                let id_delete = `deltask-${data[i].id}`;\r\n                let id_run = `runtask-${data[i].id}`;\r\n                document.getElementById(id_delete).addEventListener('click', function() {\r\n                    deleteTask(data, [i], field);\r\n                });\r\n                document.getElementById(id_run).addEventListener('click', function() {\r\n                    moveTask(data, 'plan', 'work', [i]);\r\n                });\r\n            }\r\n        break;\r\n        }\r\n        case 'work': {\r\n            for (let i = 0; i < data.length; i++) {\r\n                let id_delete = `deltask-${data[i].id}`;\r\n                let id_done = `donetask-${data[i].id}`;\r\n                let id_plan = `toplantask-${data[i].id}`;\r\n                let html = `<div class=\"task\"><h3>${data[i].name}</h3><p>${data[i].decr}</p><div class=\"task__controls\"><span class=\"control-active\" id=\"${id_done}\">Выполнено</span><span class=\"control-back\"  id=\"${id_plan}\">В план</span><span class=\"control-delete\" id=\"${id_delete}\">Удалить</span></div></div>`;\r\n                render = render + html;\r\n            }\r\n            document.getElementById(field).innerHTML = render;\r\n            for (let i = 0; i < data.length; i++) {\r\n                let id_delete = `deltask-${data[i].id}`;\r\n                let id_done = `donetask-${data[i].id}`;\r\n                let id_plan = `toplantask-${data[i].id}`;\r\n                document.getElementById(id_delete).addEventListener('click', function() {\r\n                    deleteTask(data, [i], field);\r\n                });\r\n                document.getElementById(id_done).addEventListener('click', function() {\r\n                    moveTask(data, 'work', 'done', [i]);\r\n                });\r\n                document.getElementById(id_plan).addEventListener('click', function() {\r\n                    moveTask(data, 'work', 'plan', [i]);\r\n                });\r\n            }\r\n        break;\r\n        }\r\n        case 'done': {\r\n            for (let i = 0; i < data.length; i++) {\r\n                let id_delete = `deltask-${data[i].id}`;\r\n                let id_run = `runtask-${data[i].id}`;\r\n                let id_archive = `archtask-${data[i].id}`;\r\n                let html = `<div class=\"task\"><h3>${data[i].name}</h3><p>${data[i].decr}</p><div class=\"task__controls\"><span class=\"control-archive\" id=\"${id_archive}\">В архив</span><span class=\"control-back\" id=\"${id_run}\">В работу</span><span class=\"control-delete\" id=\"${id_delete}\">Удалить</span></div></div>`;\r\n                render = render + html;\r\n            }\r\n            document.getElementById(field).innerHTML = render;\r\n            document.getElementById(field).innerHTML = render;\r\n            for (let i = 0; i < data.length; i++) {\r\n                let id_delete = `deltask-${data[i].id}`;\r\n                let id_run = `runtask-${data[i].id}`;\r\n                let id_archive = `archtask-${data[i].id}`;\r\n                document.getElementById(id_delete).addEventListener('click', function() {\r\n                    deleteTask(data, [i], field);\r\n                });\r\n                document.getElementById(id_run).addEventListener('click', function() {\r\n                    moveTask(data, 'done', 'work', [i]);\r\n                });\r\n                document.getElementById(id_archive).addEventListener('click', function() {\r\n                    moveTask(data, 'done', 'archive', [i]);\r\n                });\r\n            }\r\n        break;\r\n        }\r\n    }\r\n}\r\n\r\n// Окно добавления задания\r\nfunction createTask() {\r\n    let addTaskId = Math.trunc(Math.random() * 10);\r\n    let dialog = document.createElement('div');\r\n        dialog.className = 'dialog';\r\n        dialog.id = 'dialog-' + addTaskId;\r\n        dialog.innerHTML = '<header>Новая задача</header><div class=\"dialog__body\"><input type=\"text\" id=\"dialog-' + addTaskId + '-name\" placeholder=\"Название задачи\"><textarea id=\"dialog-' + addTaskId + '-decr\" placeholder=\"Краткое описание задачи\"></textarea><button class=\"add\" id=' + addTaskId + '>Добавить</button><button class=\"delete\" id=\"close-' + addTaskId + '\">Закрыть</button></div>';\r\n\r\n    document.body.appendChild(dialog);\r\n    document.getElementById(addTaskId).addEventListener('click', function() {\r\n        createTaskСheck(addTaskId);\r\n    });\r\n    document.getElementById('close-'+addTaskId).addEventListener('click', function() {\r\n        closeTask(addTaskId);\r\n    });\r\n}\r\n\r\n// Закрытие окна добавления задания\r\nfunction closeTask(id) {\r\n    document.getElementById(id).removeEventListener('click', function() {\r\n        createTaskСheck(id);\r\n    });\r\n    document.getElementById('close-'+id).removeEventListener('click', function() {\r\n        closeTask(id);\r\n    });\r\n    document.getElementById('dialog-' + id).remove();\r\n}\r\n\r\n// Вызов оповещения\r\nfunction notify(head, message, type) {\r\n    let notify = document.createElement('div');\r\n    notify.id = Math.trunc(Math.random() * 10);\r\n    notify.className = `notify notify-${type} notify-arrive`;\r\n    notify.innerHTML = `<h4>${head}</h4><p>${message}</p>`;\r\n    document.body.appendChild(notify);\r\n    setTimeout(function () {\r\n        notify.classList.remove('notify-arrive');\r\n        setTimeout(function () {\r\n            notify.classList.add('notify-leave')\r\n            setTimeout(function () {\r\n                notify.remove();\r\n            }, 1200);\r\n        }, 4000)\r\n    }, 1000);\r\n}"]}