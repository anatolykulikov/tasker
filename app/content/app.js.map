{"version":3,"sources":["functions.js","index.js","init.js","ui.js"],"names":["createTaskСheck","id","taskName","document","getElementById","value","taskDesc","length","addTask","removeEventListener","remove","name","desc","app","state","drawMenu","task","task_coint","decr","data","getData","plan","push","drawTasks","updateApp","deleteTask","arr","element","from","splice","moveTask","to","run","datafinished","Date","humanizeData","d","day","getDate","month","getMonth","year","getFullYear","hour","getHours","minute","getMinutes","sizeUsed","appSize","JSON","stringify","toFixed","sizeUsedPercent","percent","initApp","localStorage","getItem","loadApp","installApp","notify","drawMain","version","work","done","archive","setItem","localapp","parse","console","log","deleteApp","removeItem","setTimeout","location","reload","innerHTML","page","drawTaskboard","drawArchive","drawSettings","addEventListener","createTask","field","render","i","id_delete","concat","id_run","_loop","id_done","id_plan","_loop2","id_archive","_loop3","addTaskId","Math","trunc","random","dialog","createElement","className","body","appendChild","closeTask","drawArchiveTask","dataCreateTask","dataFinishedTask","usedPlace","usedBar","html","deleteAppProcess","closeDeleteApp","KillApp","type","window","onload"],"mappings":"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","file":"app.js","sourcesContent":["// Проверка заполнения задания\r\nfunction createTaskСheck(id) {\r\n    let taskName = document.getElementById('dialog-' + id + '-name').value;\r\n    let taskDesc = document.getElementById('dialog-' + id + '-decr').value;\r\n\r\n    if(taskName.length > 0) {\r\n        addTask(taskName, taskDesc);\r\n        document.getElementById(id).removeEventListener('click', function() {\r\n            createTaskСheck(id);\r\n        });\r\n        document.getElementById('dialog-' + id).remove();\r\n    }\r\n}\r\n\r\n// Добавление задачи\r\nfunction addTask(name, desc) {\r\n    if(app.state !== 'tasks') {\r\n        app.state = 'tasks';\r\n        drawMenu(app.state);\r\n    }\r\n    let task = {\r\n        id: ++app.task_coint,\r\n        name: name,\r\n        decr: desc,\r\n        data: getData()\r\n    }\r\n    app.plan.push(task);\r\n    drawTasks('plan');\r\n    updateApp();\r\n}\r\n\r\n// Удаление задачи\r\nfunction deleteTask(arr, element, from) {\r\n    arr.splice(element, 1);\r\n    drawTasks(from);\r\n    updateApp();\r\n}\r\n\r\n// Перемещение задачи\r\nfunction moveTask(arr, from, to, element) {\r\n    let run = arr[element];\r\n    if(from == 'work' && to == 'done') {\r\n        run.datafinished = getData();    }\r\n    app[to].push(run);\r\n    arr.splice(element, 1);\r\n    drawTasks(from);\r\n    drawTasks(to);\r\n    updateApp();\r\n}\r\n\r\n// Функция текущей даты\r\nfunction getData() {\r\n    let data = new Date();\r\n    return data;\r\n};\r\n// Приведение даты к человеческому состоянию\r\nfunction humanizeData(d) {\r\n    let data = new Date(d);\r\n    let day = data.getDate(),\r\n        month = data.getMonth(),\r\n        year = data.getFullYear(),\r\n        hour = data.getHours(),\r\n        minute = data.getMinutes();\r\n    if(minute<10) {minute = '0' + minute;}\r\n    let monthNames = ['января', 'февраля', 'марта', 'апреля', 'мая', 'июня', 'июля', 'августа', 'сентября', 'октября', 'ноября', 'декабря'];\r\n    let humanMonth = monthNames[month];\r\n    let response = day + ' ' + humanMonth + ' ' + year + ' в ' + hour + ':' + minute;\r\n    return response;\r\n}\r\n\r\n\r\n// Свободное место\r\nfunction sizeUsed() {\r\n    let appToString = JSON.stringify(app);\r\n    let appSize = ((appToString.length * 2) / 1024).toFixed(2);\r\n    let percent = ((appSize / 5120) * 100).toFixed(2);\r\n    let response = appSize + 'Кб из 5Мб (' + percent +'% используется)';\r\n    return response;\r\n}\r\nfunction sizeUsedPercent() {\r\n    let appToString = JSON.stringify(app);\r\n    let appSize = ((appToString.length * 2) / 1024).toFixed(2);\r\n    let percent = ((appSize / 5120) * 100).toFixed(2);\r\n    if(percent < 1) {\r\n        percent = 1;\r\n    }\r\n    return percent;\r\n}","var app;\r\n// Инициализация приложения\r\nwindow.onload = () => {\r\n    initApp();\r\n};","function initApp() {\r\n    // Приложение установлено\r\n    if(localStorage.getItem('TaskerApp')) {\r\n        app = loadApp();\r\n        notify('success');\r\n    } else {\r\n        app = installApp();\r\n        notify('success');\r\n    }\r\n    drawMain();\r\n    drawMenu(app.state);    \r\n}\r\n\r\nfunction installApp() {\r\n    let app = {\r\n        version: 1,\r\n        task_coint: 0,\r\n        plan: [],\r\n        work: [],\r\n        done: [],\r\n        archive: [],\r\n        state: 'tasks'\r\n    };\r\n    localStorage.setItem('TaskerApp', JSON.stringify(app));\r\n    notify('success');\r\n    return app;\r\n}\r\nfunction loadApp() {\r\n    let localapp = JSON.parse(localStorage.getItem('TaskerApp'));\r\n\r\n    if(!localapp.state) {\r\n        console.log('Создаем состояние для приложения');\r\n        localapp.state = 'tasks';\r\n    }\r\n    return localapp;\r\n}\r\nfunction updateApp() {\r\n    localStorage.setItem('TaskerApp', JSON.stringify(app));\r\n}\r\nfunction deleteApp() {\r\n    localStorage.removeItem('TaskerApp');\r\n    app = null;\r\n    notify('error');\r\n    setTimeout(function () {\r\n        document.location.reload(true);\r\n    }, 1250);\r\n}","// Отрисовка приложения\r\nfunction drawMain() {\r\n    let html = '<aside class=\"app__sidebar\"><h1>Tasker<span>.app</span></h1><nav class=\"app__menu\" id=\"appmenu\"></nav></aside><div id=\"appbody\" class=\"app__body\"></div>';\r\n    document.getElementById('main').innerHTML = html;\r\n    \r\n}\r\n\r\n//Отрисовка меню\r\nfunction drawMenu(page) {\r\n    app.state = page;\r\n    switch(page) {\r\n        case 'tasks': {\r\n            let html = `<span class=\"app__menu_addtask\" id=\"addtask\">Добавить</span><span class=\"app__menu_element app__menu-selected\">Задачи</span><span class=\"app__menu_element\" onclick=\"drawMenu('archive')\">Архив</span><hr class=\"app__menu_divider\"><span class=\"app__menu_element\" onclick=\"drawMenu('settings')\">Приложение</span>`;\r\n            document.getElementById('appmenu').innerHTML = html;\r\n            drawTaskboard();\r\n        break;}\r\n        case 'archive': {\r\n            let html = `<span class=\"app__menu_addtask\" id=\"addtask\">Добавить</span><span class=\"app__menu_element\" onclick=\"drawMenu('tasks')\">Задачи</span><span class=\"app__menu_element app__menu-selected\">Архив</span><hr class=\"app__menu_divider\"><span class=\"app__menu_element\" onclick=\"drawMenu('settings')\">Приложение</span>`;\r\n            document.getElementById('appmenu').innerHTML = html;\r\n            drawArchive();\r\n        break;}\r\n        case 'settings': {\r\n            let html = `<span class=\"app__menu_addtask\" id=\"addtask\">Добавить</span><span class=\"app__menu_element\" onclick=\"drawMenu('tasks')\">Задачи</span><span class=\"app__menu_element\" onclick=\"drawMenu('archive')\">Архив</span><hr class=\"app__menu_divider\"><span class=\"app__menu_element app__menu-selected\">Приложение</span>`;\r\n            document.getElementById('appmenu').innerHTML = html;\r\n            drawSettings();\r\n        break;}\r\n    }\r\n    document.getElementById('addtask').addEventListener('click', createTask);\r\n    updateApp();\r\n}\r\n\r\n// Отрисовка доски задач\r\nfunction drawTaskboard() {\r\n    let html = '<section class=\"app__task_col\"><h2>План</h2><div class=\"app__wrapper\" id=\"plan\"></div></section><section class=\"app__task_col\"><h2>В работе</h2><div class=\"app__wrapper\" id=\"work\"></div></section><section class=\"app__task_col\"><h2>Выполнены</h2><div class=\"app__wrapper\" id=\"done\"></div></section>';\r\n    document.getElementById('appbody').innerHTML = html;\r\n    drawTasks('plan');\r\n    drawTasks('work');\r\n    drawTasks('done');\r\n}\r\n// Отрисовка задачи\r\nfunction drawTasks(field) {\r\n    let data = app[field];\r\n    let render = '';\r\n    switch(field) {\r\n        // Отрисовываем элементы в плане\r\n        case 'plan': {\r\n            for (let i = 0; i < data.length; i++) {\r\n                let id_delete = `deltask-${data[i].id}`;\r\n                let id_run = `runtask-${data[i].id}`;\r\n                let html = `<div class=\"task\"><h3>${data[i].name}</h3><p>${data[i].decr}</p><div class=\"task__controls\"><span class=\"control-active\" id=\"${id_run}\">В работу</span><span class=\"control-delete\" id=\"${id_delete}\">Удалить</span></div></div>`;\r\n                render = render + html;\r\n            }\r\n            document.getElementById(field).innerHTML = render;\r\n            for (let i = 0; i < data.length; i++) {\r\n                let id_delete = `deltask-${data[i].id}`;\r\n                let id_run = `runtask-${data[i].id}`;\r\n                document.getElementById(id_delete).addEventListener('click', function() {\r\n                    deleteTask(data, [i], field);\r\n                });\r\n                document.getElementById(id_run).addEventListener('click', function() {\r\n                    moveTask(data, 'plan', 'work', [i]);\r\n                });\r\n            }\r\n        break;\r\n        }\r\n        case 'work': {\r\n            for (let i = 0; i < data.length; i++) {\r\n                let id_delete = `deltask-${data[i].id}`;\r\n                let id_done = `donetask-${data[i].id}`;\r\n                let id_plan = `toplantask-${data[i].id}`;\r\n                let html = `<div class=\"task\"><h3>${data[i].name}</h3><p>${data[i].decr}</p><div class=\"task__controls\"><span class=\"control-active\" id=\"${id_done}\">Выполнено</span><span class=\"control-back\"  id=\"${id_plan}\">В план</span><span class=\"control-delete\" id=\"${id_delete}\">Удалить</span></div></div>`;\r\n                render = render + html;\r\n            }\r\n            document.getElementById(field).innerHTML = render;\r\n            for (let i = 0; i < data.length; i++) {\r\n                let id_delete = `deltask-${data[i].id}`;\r\n                let id_done = `donetask-${data[i].id}`;\r\n                let id_plan = `toplantask-${data[i].id}`;\r\n                document.getElementById(id_delete).addEventListener('click', function() {\r\n                    deleteTask(data, [i], field);\r\n                });\r\n                document.getElementById(id_done).addEventListener('click', function() {\r\n                    moveTask(data, 'work', 'done', [i]);\r\n                });\r\n                document.getElementById(id_plan).addEventListener('click', function() {\r\n                    moveTask(data, 'work', 'plan', [i]);\r\n                });\r\n            }\r\n        break;\r\n        }\r\n        case 'done': {\r\n            for (let i = 0; i < data.length; i++) {\r\n                let id_delete = `deltask-${data[i].id}`;\r\n                let id_run = `runtask-${data[i].id}`;\r\n                let id_archive = `archtask-${data[i].id}`;\r\n                let html = `<div class=\"task\"><h3>${data[i].name}</h3><p>${data[i].decr}</p><div class=\"task__controls\"><span class=\"control-archive\" id=\"${id_archive}\">В архив</span><span class=\"control-back\" id=\"${id_run}\">В работу</span><span class=\"control-delete\" id=\"${id_delete}\">Удалить</span></div></div>`;\r\n                render = render + html;\r\n            }\r\n            document.getElementById(field).innerHTML = render;\r\n            document.getElementById(field).innerHTML = render;\r\n            for (let i = 0; i < data.length; i++) {\r\n                let id_delete = `deltask-${data[i].id}`;\r\n                let id_run = `runtask-${data[i].id}`;\r\n                let id_archive = `archtask-${data[i].id}`;\r\n                document.getElementById(id_delete).addEventListener('click', function() {\r\n                    deleteTask(data, [i], field);\r\n                });\r\n                document.getElementById(id_run).addEventListener('click', function() {\r\n                    moveTask(data, 'done', 'work', [i]);\r\n                });\r\n                document.getElementById(id_archive).addEventListener('click', function() {\r\n                    moveTask(data, 'done', 'archive', [i]);\r\n                });\r\n            }\r\n        break;\r\n        }\r\n    }\r\n}\r\n\r\n// Окно добавления задания\r\nfunction createTask() {\r\n    let addTaskId = Math.trunc(Math.random() * 10);\r\n    let dialog = document.createElement('div');\r\n        dialog.className = 'dialog';\r\n        dialog.id = 'dialog-' + addTaskId;\r\n        dialog.innerHTML = '<header>Новая задача</header><div class=\"dialog__body\"><input type=\"text\" id=\"dialog-' + addTaskId + '-name\" placeholder=\"Название задачи\"><textarea id=\"dialog-' + addTaskId + '-decr\" placeholder=\"Краткое описание задачи\"></textarea><button class=\"add\" id=' + addTaskId + '>Добавить</button><button class=\"delete\" id=\"close-' + addTaskId + '\">Закрыть</button></div>';\r\n    document.body.appendChild(dialog);\r\n    document.getElementById(addTaskId).addEventListener('click', function() {\r\n        createTaskСheck(addTaskId);\r\n    });\r\n    document.getElementById('close-'+addTaskId).addEventListener('click', function() {\r\n        closeTask(addTaskId);\r\n    });\r\n}\r\n// Закрытие окна добавления задания\r\nfunction closeTask(id) {\r\n    document.getElementById(id).removeEventListener('click', function() {\r\n        createTaskСheck(id);\r\n    });\r\n    document.getElementById('close-'+id).removeEventListener('click', function() {\r\n        closeTask(id);\r\n    });\r\n    document.getElementById('dialog-' + id).remove();\r\n}\r\n\r\n// Отрисовка архива\r\nfunction drawArchive() {\r\n    let html = '<section class=\"app__archive\"><h2>Архив задач</h2><div class=\"app__wrapper\" id=\"archive\"></div></section><section class=\"app__archive_decr\"><p>Здесь хранятся все выполненные вами задачи</p>';\r\n    document.getElementById('appbody').innerHTML = html;\r\n    drawArchiveTask();\r\n}\r\n// Отрисовка задачи из архива\r\nfunction drawArchiveTask() {\r\n    let data = app.archive;\r\n    let render = '';\r\n    if(data.length !== 0) {\r\n        for(let i = data.length - 1; i > -1; i--) {\r\n            let dataCreateTask = humanizeData(data[i].data);\r\n            let dataFinishedTask\r\n            if(data[i].datafinished) {\r\n                dataFinishedTask = humanizeData(data[i].datafinished);\r\n            } else {\r\n                dataFinishedTask = 'нет данных';\r\n            }\r\n            let id_delete = `delarch-${data[i].id}`;\r\n            let html = `<div class=\"task-archived\"><h3>${data[i].name}</h3><p>${data[i].decr}</p><time>Задача создана: ${dataCreateTask}</time><time>Задача завершена: ${dataFinishedTask}</time></div>`;\r\n            render = render + html;\r\n        }\r\n    } else {\r\n        render = '<div class=\"empty__archive\">В архиве ничего нет</div>'\r\n    }\r\n    document.getElementById('archive').innerHTML = render;\r\n}\r\n\r\n// Отрисовка настроек\r\nfunction drawSettings() {\r\n    let usedPlace = `<div class=\"setting__param\"><span>Используемое место:</span>${sizeUsed()}</div>`;\r\n    let usedBar = `<div class=\"setting__placebar\"><span style=\"width:${sizeUsedPercent()}%;\"></span></div>`;\r\n    let delele = `<div class=\"setting__delete\"><button onclick=\"deleteAppProcess()\">Удалить приложение</button></div>`;\r\n    let html = `<section class=\"app__settings\"><h2>Сведения о приложении</h2><div class=\"app__wrapper\">${usedPlace + usedBar + delele}</div></section><section class=\"app__settings_decr\"><p>Настройки приложения и основная информация</p><p>Разработчик: <a href=\"https://anatolykulikov.ru\" target=\"_blank\">Анатолий Куликов</a></p><p>Репозиторий на <a href=\"https://github.com/anatolykulikov/tasker\" target=\"_blank\">Github</a></p></section>`;\r\n    document.getElementById('appbody').innerHTML = html;\r\n}\r\n\r\n// Полное удаление приложения\r\nfunction deleteAppProcess() {\r\n    let dialog = document.createElement('div');\r\n        dialog.className = 'dialog dialog-delete';\r\n        dialog.id = 'deleteApp';\r\n        dialog.innerHTML = '<header>Удаление приложения</header><div class=\"dialog__body\"><p>Вы собираетесь удалить данные приложения Tasker.</p><p>Все данные будут удалены, восстановить их будет невозможно!</p><button class=\"add\" id=\"close-deleteApp\">Отменить удаление</button><button class=\"delete\" id=\"KillApp\">Удалить</button></div>';\r\n\r\n    document.body.appendChild(dialog);\r\n    document.getElementById('close-deleteApp').addEventListener('click', closeDeleteApp);\r\n    document.getElementById('KillApp').addEventListener('click', KillApp);\r\n}\r\nfunction closeDeleteApp() {\r\n    document.getElementById('close-deleteApp').removeEventListener('click', closeDeleteApp);\r\n    document.getElementById('KillApp').removeEventListener('click', KillApp);\r\n    document.getElementById('deleteApp').remove();\r\n}\r\nfunction KillApp() {\r\n    document.getElementById('close-deleteApp').removeEventListener('click', closeDeleteApp);\r\n    document.getElementById('KillApp').removeEventListener('click', KillApp);\r\n    document.getElementById('deleteApp').remove();\r\n    deleteApp();\r\n}\r\n\r\n// Вызов оповещения\r\nfunction notify(type) {\r\n    let notify = document.createElement('div');\r\n    notify.className = 'notify';\r\n    notify.innerHTML = `<div class=\"notify-${type}\"></div>`; \r\n    document.body.appendChild(notify);\r\n    setTimeout(function () {\r\n        notify.remove();\r\n    }, 1250);\r\n}"]}