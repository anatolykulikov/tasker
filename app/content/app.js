"use strict";function createTaskСheck(e){var a=document.getElementById("dialog-"+e+"-name").value,n=document.getElementById("dialog-"+e+"-decr").value;0<a.length&&0<n.length&&(addTask(a,n),document.getElementById(e).removeEventListener("click",function(){createTaskСheck(e)}),document.getElementById("dialog-"+e).remove())}function addTask(e,a){var n={id:++app.task_coint,name:e,decr:a,data:getData()};app.plan.push(n),drawTasks("plan"),updateApp()}function deleteTask(e,a,n){e.splice(a,1),drawTasks(n),updateApp()}function moveTask(e,a,n,t){console.info("Переместить задачу id".concat(t," из ").concat(a," в ").concat(n));var c=e[t];app[n].push(c),e.splice(t,1),drawTasks(a),drawTasks(n),updateApp()}function getData(){return new Date}var app;function initApp(){localStorage.getItem("TaskerApp")?(app=loadApp(),notify("Готово","Все данные загружены","success")):(app=installApp(),notify("Установлено","Приложение успешно установлено и готово к работе","success")),draw_Main(),draw_Taskboard()}function installApp(){var e={version:1,task_coint:0,plan:[],work:[],done:[],archive:[]};return localStorage.setItem("TaskerApp",JSON.stringify(e)),notify("Готово!","Приложение успешно установлено и готово к работе","success"),e}function loadApp(){return app=JSON.parse(localStorage.getItem("TaskerApp"))}function updateApp(){localStorage.setItem("TaskerApp",JSON.stringify(app))}function deleteApp(){localStorage.removeItem("TaskerApp"),notify("Приложение удалено","Приложение полностью удалено, все данные уничтожены","error"),draw_Main(),draw_Taskboard()}function draw_Main(){document.getElementById("main").innerHTML='<aside class="app__sidebar"><h1>Tasker<span>.app</span></h1><nav class="app__menu"><span class="app__menu_addtask" id="addtask">Добавить</span><span class="app__menu_element app__menu-selected">Задачи</span><span class="app__menu_element">Архив</span><hr class="app__menu_divider"><span class="app__menu_element">Настройки</span></nav></aside><div id="appbody" class="app__body"></div>',document.getElementById("addtask").addEventListener("click",createTask)}function draw_Taskboard(){document.getElementById("appbody").innerHTML='<section class="app__task_col"><h2>План</h2><div class="app__task_wrapper" id="plan"></div></section><section class="app__task_col"><h2>В работе</h2><div class="app__task_wrapper" id="work"></div></section><section class="app__task_col"><h2>Выполнены</h2><div class="app__task_wrapper" id="done"></div></section>',drawTasks("plan"),drawTasks("work"),drawTasks("done")}function drawTasks(c){var s=app[c],e="";switch(c){case"plan":for(var a=0;a<s.length;a++){var n="deltask-".concat(s[a].id),t="runtask-".concat(s[a].id);e+='<div class="task"><h3>'.concat(s[a].name,"</h3><p>").concat(s[a].decr,'</p><div class="task__controls"><span class="control-active" id="').concat(t,'">В работу</span><span class="control-delete" id="').concat(n,'">Удалить</span></div></div>')}document.getElementById(c).innerHTML=e;for(var o=function(e){var a="deltask-".concat(s[e].id),n="runtask-".concat(s[e].id);document.getElementById(a).addEventListener("click",function(){deleteTask(s,[e],c)}),document.getElementById(n).addEventListener("click",function(){moveTask(s,"plan","work",[e])})},d=0;d<s.length;d++)o(d);break;case"work":for(var i=0;i<s.length;i++){var l="deltask-".concat(s[i].id),r="donetask-".concat(s[i].id),p="toplantask-".concat(s[i].id);e+='<div class="task"><h3>'.concat(s[i].name,"</h3><p>").concat(s[i].decr,'</p><div class="task__controls"><span class="control-active" id="').concat(r,'">Выполнено</span><span class="control-back"  id="').concat(p,'">В план</span><span class="control-delete" id="').concat(l,'">Удалить</span></div></div>')}document.getElementById(c).innerHTML=e;for(var k=function(e){var a="deltask-".concat(s[e].id),n="donetask-".concat(s[e].id),t="toplantask-".concat(s[e].id);document.getElementById(a).addEventListener("click",function(){deleteTask(s,[e],c)}),document.getElementById(n).addEventListener("click",function(){moveTask(s,"work","done",[e])}),document.getElementById(t).addEventListener("click",function(){moveTask(s,"work","plan",[e])})},u=0;u<s.length;u++)k(u);break;case"done":for(var m=0;m<s.length;m++){var v="deltask-".concat(s[m].id),_="runtask-".concat(s[m].id),f="archtask-".concat(s[m].id);e+='<div class="task"><h3>'.concat(s[m].name,"</h3><p>").concat(s[m].decr,'</p><div class="task__controls"><span class="control-archive" id="').concat(f,'">В архив</span><span class="control-back" id="').concat(_,'">В работу</span><span class="control-delete" id="').concat(v,'">Удалить</span></div></div>')}document.getElementById(c).innerHTML=e,document.getElementById(c).innerHTML=e;for(var g=function(e){var a="deltask-".concat(s[e].id),n="runtask-".concat(s[e].id),t="archtask-".concat(s[e].id);document.getElementById(a).addEventListener("click",function(){deleteTask(s,[e],c)}),document.getElementById(n).addEventListener("click",function(){moveTask(s,"done","work",[e])}),document.getElementById(t).addEventListener("click",function(){moveTask(s,"done","archive",[e])})},T=0;T<s.length;T++)g(T)}}function createTask(){var e=Math.trunc(10*Math.random()),a=document.createElement("div");a.className="dialog",a.id="dialog-"+e,a.innerHTML='<header>Новая задача</header><div class="dialog__body"><input type="text" id="dialog-'+e+'-name" placeholder="Название задачи"><textarea id="dialog-'+e+'-decr" placeholder="Краткое описание задачи"></textarea><button class="add" id='+e+'>Добавить</button><button class="delete" id="close-'+e+'">Закрыть</button></div>',document.body.appendChild(a),document.getElementById(e).addEventListener("click",function(){createTaskСheck(e)}),document.getElementById("close-"+e).addEventListener("click",function(){closeTask(e)})}function closeTask(e){document.getElementById(e).removeEventListener("click",function(){createTaskСheck(e)}),document.getElementById("close-"+e).removeEventListener("click",function(){closeTask(e)}),document.getElementById("dialog-"+e).remove()}function notify(e,a,n){var t=document.createElement("div");t.id=Math.trunc(10*Math.random()),t.className="notify notify-".concat(n," notify-arrive"),t.innerHTML="<h4>".concat(e,"</h4><p>").concat(a,"</p>"),document.body.appendChild(t),setTimeout(function(){t.classList.remove("notify-arrive"),setTimeout(function(){t.classList.add("notify-leave"),setTimeout(function(){t.remove()},1200)},4e3)},1e3)}window.onload=function(){initApp()};
//# sourceMappingURL=app.js.map
